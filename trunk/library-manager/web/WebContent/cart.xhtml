<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:kui="http://kooobao.com/jsf/ui"
	template="/template/page_template.xhtml">
	<ui:param name="displayLogin" value="true"></ui:param>
	<ui:define name="title">酷宝图书馆-我的书架</ui:define>
	<ui:define name="body">
		<div class="book_list_container" style="width: 760px;">
			<h:panelGroup layout="block" rendered="#{cartBean.size > 0}">
				<div class="page_title">已选择的图书</div>
				<div class="table_header">
					<div class="table_header_col" style="width: 320px">书名</div>
					<div class="table_header_col" style="width: 120px">所需积分</div>
					<div class="table_header_col" style="width: 120px">重量</div>
					<div class="table_header_col" style="width: 180px">操作</div>
				</div>
				<h:form>
					<ui:repeat var="book" value="#{cartBean.books}">
						<div class="table_row">
							<div class="table_cell" style="width: 320px;">
								<div style="float: left;">
									<h:graphicImage style="width:57px;height:70px;"
										value="#{book.pictureUrl}" />
								</div>
								<div style="float: left; font-size: 14px; margin-left: 10px;">
									<h:outputLink value="/book.html">
										<h:outputText value="#{book.name}" />
										<f:param name="book_id" value="#{book.oid}" />
									</h:outputLink>
								</div>
							</div>
							<div class="table_cell" style="width: 120px; font-size: 14px;">
								<h:outputText value="#{book.listPrice}" />
							</div>
							<div class="table_cell" style="width: 120px; font-size: 14px;">
								<h:outputText value="#{book.netWeight} kg" />
							</div>
							<div class="table_cell" style="width: 180px">
								<h:commandLink action="#{cartBean.delete}"
									styleClass="btn_confirm_small">
									<h:outputText value="删除" />
									<f:param name="book_id" value="#{book.oid}" />
								</h:commandLink>
								<h:outputLink styleClass="btn_solid_small"
									style="margin-left:5px;" value="#"
									onclick="add_to_fav(#{book.oid})">
									<h:outputText value="加入收藏" />
								</h:outputLink>
							</div>
						</div>
					</ui:repeat>
				</h:form>
				<div class="clearer" />
			</h:panelGroup>
			<h:panelGroup layout="block" rendered="#{cartBean.size == 0}">
				<div class="page_title">您的书架是空的</div>
			</h:panelGroup>
		</div>
		<div
			style="float: left; width: 160px; margin-top: 5px; padding: 10px; padding-left: 30px; padding-bottom: 20px"
			class="shadow">
			<div style="font-size: 14px; margin: 10px 0px;">
				<h:outputText value="总计 #{cartBean.sumWeight}kg" />
				<br />
				<h:outputText value="所需点数#{cartBean.sumPrice}" />
			</div>
			<h:form>
				<h:commandLink styleClass="btn_confirm"
					disabled="#{cartBean.books == null}" action="#{cartBean.confirm}"
					value="确认借阅" />
				<h:commandLink styleClass="btn_alternative"
					disabled="#{cartBean.books == null}"
					action="#{cartBean.confirmBuy}" value="我要购买" />
				<h:outputLink style="margin-top:5px;" value="/index.html"
					styleClass="btn_solid">
					<h:outputText value="继续挑选" />
				</h:outputLink>
			</h:form>
		</div>
	</ui:define>
</ui:composition>