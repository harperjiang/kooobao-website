<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:kf="http://kooobao.com/jsf/func"
	xmlns:kui="http://kooobao.com/jsf/ui"
	template="/template/page_template.xhtml">
	<ui:param name="displayLogin" value="true"></ui:param>
	<ui:define name="title">酷宝图书馆-#{bookBean.book.displayName}</ui:define>
	<ui:define name="css">
		<style type="text/css">
.book_intro {
	font-size: 14px;
}

.book_intro div {
	font-size: 14px;
}

.book_intro label {
	width: 100px;
	font-weight: bold;
	display: block;
	float: left;
}

.book_intro div {
	margin-top: 10px;
	margin-bottom: 10px;
}

.book_intro div div {
	margin-top: 0px;
	margin-bottom: 0px;
}

.book_content {
	padding-left: 5px;
	padding-right: 5px;
}

.book_content_header {
	font-size: 16px;
	font-weight: bold;
	margin-top: 5px;
	margin-bottom: 15px;
}

.book_content_section {
	
}
</style>
	</ui:define>
	<ui:define name="body">
		<div
			style="float: left; width: 190px; margin-right: 5px; margin-top: 5px; height: 300px;">
			<div style="margin-top: 5px; margin-bottom: 5px; font-size: 14px;">您可能还喜欢</div>
			<ui:repeat var="book" value="#{bookBean.recommendBooks}"
				varStatus="status">
				<h:panelGroup layout="block" rendered="#{status.index == 0}">
					<div style="float: left; width: 64px; height: 74px;">
						<h:outputLink value="/book.html">
							<f:param name="book_id" value="#{book.oid}" />
							<h:graphicImage url="#{book.pictureUrl}" width="60" height="70" />
						</h:outputLink>
					</div>
					<div style="float: left; margin-left: 5px; width: 115px;">
						<div style="margin-bottom: 10px;">
							<h:outputLink value="/book.html">
								<f:param name="book_id" value="#{book.oid}" />
								<h:outputText value="#{book.displayName}" />
							</h:outputLink>
						</div>
						<div class="short_attr">
							<h:outputLabel value="作　者:" />
							<h:outputText value="#{book.author}" />
						</div>
						<div class="short_attr">
							<h:outputLabel value="出版社:" />
							<h:outputText value="#{book.publisher}" />
						</div>
					</div>
					<div class="clearer" />
				</h:panelGroup>

				<h:panelGroup layout="block" rendered="#{status.index != 0}"
					style="margin-top:5px;margin-bottom:5px;">
					<h:outputLink value="/book.html">
						<f:param name="book_id" value="#{book.oid}" />
						<h:outputText value="#{book.displayName}" />
					</h:outputLink>
				</h:panelGroup>
			</ui:repeat>
		</div>
		<div
			style="margin-top: 5px; margin-bottom: 5px; margin-right: 5px; float: left; width: 790px;">
			<div class="book_big_title"
				style="margin-top: 5px; margin-bottom: 5px;">
				<h:outputText value="#{bookBean.book.name}" />
			</div>
			<div style="width: 160px; height: 200px; float: left;">
				<h:graphicImage url="#{bookBean.book.pictureUrl}" width="160"
					height="200" />
			</div>
			<div class="book_intro"
				style="float: left; margin-left: 30px; width: 580px;">
				<div style="float: right;">
					<h:outputLink styleClass="btn_highlight" value="#"
						onclick="add_to_cart(#{bookBean.book.oid})">加入借书篮</h:outputLink>
					<br />
					<h:outputLink styleClass="btn_confirm_small" value="#"
						onclick="add_to_fav(#{bookBean.book.oid})">加入收藏</h:outputLink>
				</div>
				<div>
					<h:outputLabel id="authorLabel" for="authorText" value="作者" />
					<h:outputText id="authorText" value="#{bookBean.book.author}" />
				</div>
				<div>
					<h:outputLabel id="publisherLabel" for="publisherText" value="出版社" />
					<h:outputText id="publisherText" value="#{bookBean.book.publisher}" />
				</div>
				<div>
					<h:outputLabel id="rateLabel" for="rateText" value="读者评级" />
					<h:panelGroup id="rateText">
						<kf:for repeat="#{bookBean.book.rating}">
							<h:graphicImage width="15" height="15" url="/image/star.gif" />
						</kf:for>
						<kf:for repeat="#{5 - bookBean.book.rating}">
							<h:graphicImage width="15" height="15"
								url="/image/empty_star.gif" />
						</kf:for>
					</h:panelGroup>

				</div>

				<div>
					<h:outputLabel id="briefLabel" for="briefText" value="简介" />
					<div style="display: block; float: left; width: 480px;">
						<h:outputText id="briefText" value="#{bookBean.book.brief}"
							escape="false" />
					</div>
				</div>
			</div>
			<div class="clearer" />
		</div>

		<div class="book_content dash_line"
			style="float: left; width: 780px; margin-top: 20px; padding-top: 20px;">
			<div class="book_content_header">内容摘要</div>
			<div class="book_content_section">
				<h:outputText value="#{bookBean.book.abstract}" escape="true" />
			</div>
			<div class="book_content_header">编辑推荐</div>
			<div class="book_content_section">
				<h:outputText value="#{bookBean.book.editorComment}" escape="true" />
			</div>
			<div class="book_content_header">内页预览</div>
			<div class="book_content_section">
				<h:outputText value="#{bookBean.book.textContent}" escape="true" />
			</div>
			<div class="book_content_header">读者评论</div>
			<div class="book_content_section">
				<div style="margin-top:5px;margin-bottom:10px;">
					<div style="font-size:14px;">共有#{bookBean.book.rateSum.sum}条评论</div>
					<div style="margin-top: 5px; margin-bottom: 5px;">
						<div style="float: left">
							<kf:for repeat="5">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
							<kf:for repeat="0">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
						</div>
						<kui:progress value="#{bookBean.book.rateSum.rate5Rate}"
							width="150" height="15" color="#cccccc" backgroundColor="#eeeeee"
							styleClass="float:left;" />
						<div style="float: left; margin-left: 4px;">#{bookBean.book.rateSum.rate5}</div>
					</div>
					<div class="clearer" />
					<div style="margin-top: 5px; margin-bottom: 5px;">
						<div style="float: left">
							<kf:for repeat="1">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
							<kf:for repeat="4">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
						</div>
						<kui:progress value="#{bookBean.book.rateSum.rate4Rate}"
							width="150" height="15" color="#cccccc" backgroundColor="#eeeeee"
							styleClass="float:left;" />
						<div style="float: left; margin-left: 4px;">#{bookBean.book.rateSum.rate4}</div>
					</div>
					<div class="clearer" />
					
					<div style="margin-top: 5px; margin-bottom: 5px;">
						<div style="float: left">
							<kf:for repeat="2">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
							<kf:for repeat="3">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
						</div>
						<kui:progress value="#{bookBean.book.rateSum.rate3Rate}"
							width="150" height="15" color="#cccccc" backgroundColor="#eeeeee"
							styleClass="float:left;" />
						<div style="float: left; margin-left: 4px;">#{bookBean.book.rateSum.rate3}</div>
					</div>
					<div class="clearer" />
					
					<div style="margin-top: 5px; margin-bottom: 5px;">
						<div style="float: left">
							<kf:for repeat="3">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
							<kf:for repeat="2">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
						</div>
						<kui:progress value="#{bookBean.book.rateSum.rate2Rate}"
							width="150" height="15" color="#cccccc" backgroundColor="#eeeeee"
							styleClass="float:left;" />
						<div style="float: left; margin-left: 4px;">#{bookBean.book.rateSum.rate2}</div>
					</div>
					<div class="clearer" />
					
					<div style="margin-top: 5px; margin-bottom: 5px;">
						<div style="float: left">
							<kf:for repeat="4">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
							<kf:for repeat="1">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
						</div>
						<kui:progress value="#{bookBean.book.rateSum.rate1Rate}"
							width="150" height="15" color="#cccccc" backgroundColor="#eeeeee"
							styleClass="float:left;" />
						<div style="float: left; margin-left: 4px;">#{bookBean.book.rateSum.rate1}</div>
					</div>
					<div class="clearer" />

				</div>
				<ui:repeat var="comment" value="#{bookBean.book.comments}">
					<div style="font-size: 14px; margin-top: 5px; margin-bottom: 5px;">
						<h:outputText value="#{comment.visitorId}" />
						在
						<h:outputText value="#{comment.createTime}">
							<f:convertDateTime pattern="yyyy-MM-dd HH:mm"
								timeZone="#{envSettingBean.timeZone}" />
						</h:outputText>
						评价:
						<h:panelGroup id="rateText">
							<kf:for repeat="#{comment.rating}">
								<h:graphicImage width="15" height="15" url="/image/star.gif" />
							</kf:for>
							<kf:for repeat="#{5 - comment.rating}">
								<h:graphicImage width="15" height="15"
									url="/image/empty_star.gif" />
							</kf:for>
						</h:panelGroup>
					</div>
					<div
						style="background-color: #f9f9f9; padding: 5px; font-size: 14px;">
						<h:outputText value="#{comment.content}" />
					</div>
				</ui:repeat>
			</div>
		</div>
	</ui:define>
</ui:composition>