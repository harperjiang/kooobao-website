<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/common/page_template.xhtml">
	<ui:define name="title">书籍管理页面</ui:define>
	<ui:define name="body">
		<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>

		<style type="text/css">
.col1 {
	width: 100px;
}

.col2 {
	width: 200px;
}

.col3 {
	width: 450px;
}

.col4 {
	width: 30px;
}
</style>
		<h:panelGroup layout="block"
			style="margin-top: 25px;margin-left:20px;">
			<h:panelGroup layout="block"
				style="font-size: 18px; margin-top: 30px;margin-bottom:20px;">查看已登记图书</h:panelGroup>

			<h:panelGroup layout="block" id="searchPanel" class="formLayout">
				<h:form id="searchForm">
					<br />
					<h:outputLabel id="nameLabel" for="nameText" value="关键字" />
					<h:inputText id="nameText" value="#{manageBookBean.search.keyword}"
						required="true" />
					<br />
					<h:commandButton value="查询" action="#{manageBookBean.search}"
						styleClass="submitlongbutton" />
				</h:form>

				<h:form id="resultForm">
					<h:dataTable id="resultDataTable" width="800"
						styleClass="dataTable" columnClasses="col1,col2,col3,col4"
						value="#{manageBookBean.books}" var="record">
						<h:column>
							<f:facet name="header">书名</f:facet>
							<h:commandLink action="#{manageBookBean.edit}">
								<h:outputText value="#{record.name}" />
							</h:commandLink>
						</h:column>
						<h:column>
							<f:facet name="header">类别</f:facet>
							<h:outputText value="#{record.category.layeredName}" />
						</h:column>
						<h:column>
							<f:facet name="header">简介</f:facet>
							<h:outputText value="#{record.brief}" />
						</h:column>
					</h:dataTable>
					<h:panelGroup layout="block" style="margin-top:20px;">
						<h:commandLink value="上一页" action="#{manageBookBean.prevPage}" />
						<h:outputText
							value="共#{manageBookBean.pageCount}页  第#{manageBookBean.currentPage}页"
							style="margin-left:20px;margin-right:20px;" />
						<h:commandLink value="下一页" action="#{manageBookBean.nextPage}" />
					</h:panelGroup>
				</h:form>
			</h:panelGroup>

			<h:panelGroup layout="block"
				style="font-size: 18px; margin-top: 30px;margin-bottom:20px;">新增图书记录</h:panelGroup>

			<h:panelGroup id="newbookPanel" class="formLayout" layout="block">
				<h:messages />
				<h:form id="newbookForm">
					<!-- Panel for creating new books -->
					<h:outputLabel id="bnLabel" for="bnText" value="书名" />
					<h:inputText id="bnText" value="#{manageBookBean.book.name}" />
					<br />
					<h:outputLabel id="puLabel" for="puText" value="图片地址" />
					<h:inputText id="puText" value="#{manageBookBean.book.pictureUrl}" />
					<br />
					<h:outputLabel id="categoryLabel" for="categorySelect" value="类别" />
					<h:selectOneMenu id="categorySelect"
						value="#{manageBookBean.book.category}"
						converter="categoryConverter">
						<f:selectItems value="#{categoryInfoBean.leaves}" />
					</h:selectOneMenu>
					<br />
					<h:outputLabel id="briefLabel" for="briefText" value="簡介" />
					<h:inputText id="briefText" value="#{manageBookBean.book.brief}" />
					<br />
					<h:outputLabel id="contentLabel" for="contentText" value="详细内容" />
					<h:inputTextarea id="contentText" style="height:400px;width:730px;"
						value="#{manageBookBean.book.content}" />
					<br />
					<script type="text/javascript">
						CKEDITOR.replace('newbookForm:contentText');
					</script>
					<h:commandButton id="newbookSubmit" class="submitbtn"
						action="#{manageBookBean.save}" value="保存" />
				</h:form>
			</h:panelGroup>
		</h:panelGroup>
	</ui:define>
</ui:composition>