<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<import resource="env.xml" />

	<bean id="userDao" class="com.kooobao.authcenter.domain.dao.jpa.JpaUserDao">
		<property name="entityManager" ref="entityManager" />
	</bean>

	<bean id="socketFactory" class="sun.rmi.transport.proxy.RMIDirectSocketFactory" />

	<bean id="rmiRegistry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
		<property name="port" value="9001" />
		<property name="serverSocketFactory" ref="socketFactory" />
		<property name="clientSocketFactory" ref="socketFactory" />
		<property name="alwaysCreate" value="true" />
	</bean>

	<bean id="defaultAuthenticateService"
		class="com.kooobao.authcenter.service.DefaultAuthenticateService">
		<property name="userDao" ref="userDao" />
	</bean>

	<bean id="authenticateService" class="org.springframework.remoting.rmi.RmiServiceExporter">
		<property name="registryPort" value="9001" />
		<property name="registryHost" value="localhost" />
		<property name="servicePort" value="9002" />
		<property name="serviceInterface"
			value="com.kooobao.authcenter.service.AuthenticateService" />
		<property name="serviceName" value="AuthenticateService" />
		<property name="service" ref="defaultAuthenticateService" />
	</bean>

	<bean id="defaultUserService" class="com.kooobao.authcenter.service.DefaultUserService">
		<property name="userDao" ref="userDao" />
	</bean>

	<bean id="userService" class="org.springframework.remoting.rmi.RmiServiceExporter">
		<property name="registryPort" value="9001" />
		<property name="registryHost" value="localhost" />
		<property name="servicePort" value="9002" />
		<property name="serviceInterface" value="com.kooobao.authcenter.service.UserService" />
		<property name="serviceName" value="UserService" />
		<property name="service" ref="defaultUserService" />
	</bean>

</beans>