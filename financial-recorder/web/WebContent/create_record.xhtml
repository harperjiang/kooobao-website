<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/common/page_template.xhtml">
	<ui:define name="title">酷宝英语教育-财务信息记录系统</ui:define>
	<ui:define name="body">
		<script type="text/javascript">
			//           
			function openCustomerWindow() {
				document.getElementById("customerWindow").style.visibility = "visible";
			}
			function select(index){
				return myfaces.oam.submitForm('form','form:customerTable:'+index+':selectLink');
			}
			//
		</script>
		<h:form>
			<h:panelGroup style="margin-top: 25px;">
				<h:panelGroup rendered="#{createRecordBean.payment}"
					style="font-size: 18px; margin-bottom: 20px;">请求付款</h:panelGroup>
				<h:panelGroup rendered="#{!createRecordBean.payment}"
					style="font-size: 18px; margin-bottom: 20px;">记录收款</h:panelGroup>
				<div class="block color1">
					<h:outputLabel value="金额" />
					<h:inputText id="amountText"
						value="#{createRecordBean.record.amount}" required="true"
						requiredMessage="请填写金额">
						<f:convertNumber />
					</h:inputText>
					<h:message for="amountText" />
					<br /> <a href="#" onclick="javascript:openCustomerWindow()">选择常用客户</a>

					<br />
					<h:outputLabel value="客户名称" />
					<h:inputText value="#{createRecordBean.record.with.name}" />
					<br />
					<h:outputLabel value="客户公司名称" />
					<h:inputText value="#{createRecordBean.record.with.company}" />
					<br />
					<h:outputLabel value="客户账户" />
					<h:inputText value="#{createRecordBean.record.with.account}" />
					<br />
					<h:outputLabel value="请求时间" />
					<h:inputText value="#{createRecordBean.record.createDate}">
						<f:convertDateTime pattern="yyyy/MM/dd" />
					</h:inputText>
					<br />
					<h:outputLabel value="描述" />
					<h:inputTextarea value="#{createRecordBean.record.description}" />
					<br />
					<h:commandButton value="保存" action="#{createRecordBean.save}" />
				</div>
			</h:panelGroup>
		</h:form>
		<div id="customerWindow"
			style="width: 400px; height: 200px; left: 350px; top: 350px; visibility: hidden;"
			class="floatWindow">
			<h:form id="form">
				<h:dataTable id="customerTable" width="450"
					value="#{selectCustomerBean.customers}" var="customer"
					styleClass="dataTable">
					<h:column>
						<f:facet name="header">客户名</f:facet>
						<h:outputText value="#{customer.name}" />
					</h:column>
					<h:column>
						<f:facet name="header">客户公司</f:facet>
						<h:outputText value="#{customer.company}" />

					</h:column>
					<h:column>
						<f:facet name="header">帳號</f:facet>
						<h:outputText value="#{customer.account}" />
					</h:column>
					<h:column>
						<f:facet name="header"></f:facet>
						<h:outputLink value="#"
							onclick="select(#{selectCustomerBean.counter.rowIndex});">选择</h:outputLink>
						<h:commandLink id="selectLink" style="visibility: hidden;"
							action="#{createRecordBean.selectCustomer}" value="选择" />
						<h:outputText value="#{selectCustomerBean.counter.next}" />
					</h:column>
				</h:dataTable>
			</h:form>
		</div>
	</ui:define>
</ui:composition>