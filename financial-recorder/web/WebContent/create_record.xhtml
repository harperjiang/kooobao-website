<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/common/page_template.xhtml">
	<ui:define name="title">酷宝英语教育-财务信息记录系统</ui:define>
	<ui:define name="body">
		<script type="text/javascript">
			//           
			function openCustomerWindow() {
				document.getElementById("customerWindow").style.visibility = "visible";
			}
			function closeCustomerWindow() {
				document.getElementById("customerWindow").style.visibility = "hidden";
			}
			function select(index){
				return myfaces.oam.submitForm('form','customerTable:'+index+':selectLink');
			}
			//
		</script>

		<h:form id="form" enctype="multipart/form-data" prependId="false">
			<h:panelGroup style="margin-top: 25px;">
				<h:panelGroup rendered="#{createRecordBean.payment}"
					style="font-size: 18px; margin-bottom: 20px;">请求付款</h:panelGroup>
				<h:panelGroup rendered="#{!createRecordBean.payment}"
					style="font-size: 18px; margin-bottom: 20px;">记录收款</h:panelGroup>
				<div class="block color1">
					<h:outputLabel value="金额" />
					<h:inputText id="amountText"
						value="#{createRecordBean.record.amount}" required="true"
						requiredMessage="请填写金额">
						<f:convertNumber />
					</h:inputText>
					<h:message for="amountText" />
					<br /> <a href="#" onclick="javascript:openCustomerWindow()">选择常用客户</a>
					<br />
					<div id="customerWindow"
						style="width: 550px; height: 200px; left: 350px; top: 350px; visibility: hidden;"
						class="floatWindow">
						<h:dataTable id="customerTable" width="450"
							value="#{createRecordBean.customers}" var="customer"
							styleClass="dataTable">
							<h:column>
								<f:facet name="header">客户名</f:facet>
								<h:outputText value="#{customer.name}" />
							</h:column>
							<h:column>
								<f:facet name="header">客户公司</f:facet>
								<h:outputText value="#{customer.company}" />

							</h:column>
							<h:column>
								<f:facet name="header">帳號</f:facet>
								<h:outputText value="#{customer.account}" />
							</h:column>
							<h:column>
								<f:facet name="header"></f:facet>
								<h:outputLink value="#"
									onclick="select(#{createRecordBean.counter.rowIndex});">选择</h:outputLink>
								<h:commandLink id="selectLink" style="visibility: hidden;"
									action="#{createRecordBean.selectCustomer}" value="选择" />
								<h:outputText value="#{createRecordBean.counter.next}" />
							</h:column>
						</h:dataTable>
						<h:outputLink onclick="closeCustomerWindow()">关闭窗口</h:outputLink>
					</div>
					<h:outputLabel value="客户名称" />
					<h:inputText value="#{createRecordBean.record.with.name}" />
					<br />
					<h:outputLabel value="客户公司名称" />
					<h:inputText value="#{createRecordBean.record.with.company}" />
					<br />
					<h:outputLabel value="客户账户" />
					<h:inputText value="#{createRecordBean.record.with.account}" />
					<br />
					<h:outputLabel value="请求时间" />
					<h:inputText value="#{createRecordBean.record.createDate}">
						<f:convertDateTime pattern="yyyy/MM/dd" />
					</h:inputText>
					<br />
					<h:outputLabel value="描述" />
					<h:inputTextarea value="#{createRecordBean.record.description}" />
					<br />
					<h:outputLabel value="上传文件" />
					<input id="attachment" name="attachment" type="file" />
					<h:commandButton value="保存" styleClass="submitlongbutton"
						action="#{createRecordBean.save}" />
				</div>
			</h:panelGroup>
		</h:form>

	</ui:define>
</ui:composition>