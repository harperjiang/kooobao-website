<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:kf="http://kooobao.com/jsf/func"
	template="/template/page_template.xhtml">
	<ui:param name="displayLogin" value="true" />
	<ui:define name="title">酷宝图书馆-#{categoryBean.selectedCategory.name}</ui:define>
	<ui:define name="body">
		<div class="component" style="width: 180px; float: left; margin: 5px;">
			<div class="title">书籍分类</div>
			<ui:repeat var="category" value="#{suppDataBean.categories}">
				<div id="category_#{category.oid}" class="category">
					<div class="category_title">
						<h:outputLink style="display:block;text-decoration:none;"
							onclick="category_switch(#{category.oid})" value="#">
							<h:outputText value="#{category.name}" />
						</h:outputLink>
					</div>
					<div id="category_content_#{category.oid}">
						<ui:repeat var="child" value="#{category.children}"
							varStatus="status">
							<div class="category_content">
								<h:outputLink value="/category.html">
									<h:outputText value="#{child.name}" />
									<f:param name="category_id" value="#{child.oid}" />
								</h:outputLink>
							</div>
						</ui:repeat>
					</div>
				</div>
			</ui:repeat>
		</div>
		<div class="book_list_container" style="width: 790px;">
			<ui:repeat var="book" value="#{categoryBean.categoryBooks}">
				<div class="bl_unit">
					<div class="bl_picture">
						<h:outputLink value="/book.html">
							<f:param name="book_id" value="#{book.oid}" />
							<h:graphicImage
								style="width:115px;height:135px;border-style:none;"
								value="#{book.pictureUrl}" />
						</h:outputLink>
					</div>
					<div class="bl_content" style="width: 640px;">
						<div class="bl_title">
							<h:outputLink value="/book.html" style="text-decoration:none;">
								<f:param name="book_id" value="#{book.oid}" />
								<h:outputText value="#{book.name}" />
							</h:outputLink>
						</div>
						<div class="attr">
							<h:panelGroup id="rateText">
								<kf:for repeat="#{bookBean.book.rating}">
									<h:graphicImage width="15" height="15" url="/image/star.gif" />
								</kf:for>
								<kf:for repeat="#{5 - bookBean.book.rating}">
									<h:graphicImage width="15" height="15"
										url="/image/empty_star.gif" />
								</kf:for>
							</h:panelGroup>
						</div>
						<h:outputText id="authorText" value="#{book.author}著" />
						<h:outputText value="/" />
						<h:outputText id="publisherText" value="#{book.publisher}出版" />

						<div class="bl_brief" style="width: 640px;">
							<h:outputText escape="false" value="#{book.brief}" />
						</div>

					</div>
					<div style="display: block; margin-left: 400px; float: left;">
						<h:form>
							<h:outputLink value="#" styleClass="btn_highlight"
								onclick="add_to_cart(#{book.oid})">
								<h:graphicImage style="height:16px;width:16px;"
									url="/image/basket.gif" />
								<h:outputText value="加入书架" />
							</h:outputLink>
						</h:form>
					</div>
				</div>
				<div class="clearer" />
			</ui:repeat>
			<h:panelGroup display="block" styleClass="navigation_bar">
				<h:form>
					<h:commandLink action="#{categoryBean.prevPage}"
						styleClass="btn_solid_small">上一页</h:commandLink>
					<h:commandLink action="#{categoryBean.nextPage}"
						styleClass="btn_solid_small">下一页</h:commandLink>
				</h:form>
			</h:panelGroup>
		</div>
		<div class="clearer" />
	</ui:define>
</ui:composition>